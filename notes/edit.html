<html>
	<head>
		<script src="/a.js" type="text/javascript"></script>
		<title>记事本-编辑</title>
	</head>
	<body onload=L()>
		<h1 id="name"></h1>
		<textarea id="main" oninput=C() rows="30" cols="80" style="font-size:16px"></textarea><br><br>
		<button onclick=S() style="width:500px;height:35px">保存</button>
		&emsp;<span>字数统计：共</span><b id="cout"></b><span>字</span>
		<script>
			var name;
			function L()
			{
				name=localStorage.ntsname;
				document.getElementById("name").innerText=name;
				document.getElementById("main").value=localStorage.getItem(name);
				C();
			}
			function C()
			{
				var main=document.getElementById("main").value;
				var c=0;
				for (var i=0;i<main.length;i++)
				{
					if (main[i]=="{")
					{for (i++;main[i]!="|"&&i<main.length;i++);}
					else if (main[i]=="\\")
					{i++;c++;}
					else if (main[i]!="}"&&main[i]!="\n")
					{c++;}
				}
				document.getElementById("cout").innerText=String(c);
			}
			function S()
			{
				r=confirm("确定保存?");
				if (!r)
				{return;}
				if (localStorage.getItem(name)==undefined)
				{
					alert("保存失败~");
					return;
				}
				localStorage.setItem(name,document.getElementById("main").value);
				alert("保存成功!");
			}
		</script>
	</body>
</html>